import{o as s,c as o,f as t,t as p,j as g,B as k,F as m,r as y,m as x,l as $,v as C,S as q,z as S,A as w,u as j,n as B,d as M}from"./index-3b4078e1.js";import{v as D,A as I,u as b,C as z}from"./User-89531140.js";const f=""+new URL("../img/touxiang.jpg",import.meta.url).href,A={class:"w-full h-full bg-slate-700 rounded-lg filter blur-[0.8px]"},L={class:"flex justify-center items-center absolute top-0 bottom-0 left-0 right-0 m-auto"},Ct={__name:"InfoNo",props:{title:String},setup(d){return(a,l)=>(s(),o("div",A,[t("p",L,p(d.title),1)]))}},F={class:"w-screen h-screen flex fixed top-0 justify-center items-center"},N={class:"w-80 h-96 lg:w-[28rem] lg:h-[30rem] flex p-4 rounded-lg flex-col border border-slate-700 shadow-md bg-[#191f2a]"},T=t("div",{class:"flex items-center"},[t("img",{class:"rounded-full w-10 h-10",src:f}),t("div",{class:"pl-2"},[t("div",{class:"font-semibold"},[t("p",null,"客服")])])],-1),V=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),E=[V],P={class:"flex-1 px-4 py-4 overflow-y-auto"},G={key:0,class:"flex items-center mb-4"},H=t("div",{class:"flex-none flex flex-col items-center space-y-1 mr-4"},[t("img",{class:"rounded-full w-10 h-10",src:f}),t("a",{href:"#",class:"block text-xs hover:underline"},"客服")],-1),U={class:"flex-1 bg-indigo-400 text-white p-2 rounded-lg mb-2 relative"},R=t("div",{class:"absolute left-0 top-1/2 transform -translate-x-1/2 rotate-45 w-2 h-2 bg-indigo-400"},null,-1),Y={key:1,class:"flex items-center flex-row-reverse mb-4"},J=t("div",{class:"flex-none flex flex-col items-center space-y-1 ml-4"},[t("img",{class:"rounded-full w-10 h-10",src:f}),t("a",{href:"#",class:"block text-xs hover:underline"},"我")],-1),K={class:"flex-1 bg-indigo-100 text-gray-800 p-2 rounded-lg mb-2 relative"},O=t("div",{class:"absolute right-0 top-1/2 transform translate-x-1/2 rotate-45 w-2 h-2 bg-indigo-100"},null,-1),Q={key:0,class:"flex items-center p-2"},W={key:0,class:"m-auto"},X={class:"w-full mx-2"},Z=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),tt=[Z],et={__name:"chat",props:{id:Number,remove:Function},setup(d){const a=d,l=g(null),_=g(""),h=()=>{D(a.id).then(c=>{l.value=c.data.data})};k(()=>{h()});let n=setInterval(()=>{h(),l.value.status===1&&clearInterval(n)},1e4);const r=()=>{a.remove(),clearInterval(n)},e=()=>{I(a.id,_.value).then(c=>{h()}).catch(c=>{q("提交失败",c.data.message,400)})};return(c,u)=>(s(),o("div",F,[t("div",N,[t("div",{class:"flex items-center justify-between border-b p-2"},[T,t("div",null,[t("button",{onClick:r,class:"inline-flex rounded-full p-2",type:"button"},E)])]),t("div",P,[l.value!==null?(s(!0),o(m,{key:0},y(l.value.message,(i,v)=>(s(),o(m,null,[i.is_me!==!0?(s(),o("div",G,[H,t("div",U,[t("div",null,p(i.message),1),R])])):(s(),o("div",Y,[J,t("div",K,[t("div",null,p(i.message),1),O])]))],64))),256)):x("",!0)]),l.value!==null?(s(),o("div",Q,[l.value.status===1?(s(),o("p",W,"工单已关闭，如有新疑问，请添加新工单")):(s(),o(m,{key:1},[t("div",X,[$(t("input",{class:"outline-0 w-full text-black p-2 rounded-full border border-gray-200",type:"text","onUpdate:modelValue":u[0]||(u[0]=i=>_.value=i),placeholder:"Aa"},null,512),[[C,_.value]])]),t("div",null,[t("button",{onClick:e,class:"inline-flex rounded-full p-2",type:"button"},tt)])],64))])):x("",!0)])]))}},st=d=>{const l=S(et,{id:d,remove:()=>{w(null,document.getElementById("Popup"))}});w(l,document.getElementById("Popup"))},ot={class:"inline-block min-w-full overflow-scroll rounded-lg shadow"},lt={class:"min-w-full leading-normal"},nt=t("thead",{class:"bg-[#17171a] border-b border-gray-500 sticky top-0"},[t("tr",null,[t("th",{scope:"col",class:"px-5 py-3 text-sm font-normal text-left uppercase"}," 主题 "),t("th",{scope:"col",class:"px-5 py-3 text-sm font-normal text-left uppercase"}," 最后回复 "),t("th",{scope:"col",class:"px-5 py-3 text-sm font-normal text-left uppercase"}," 状态 "),t("th",{scope:"col",class:"px-5 py-3 text-sm font-normal text-left uppercase"}," 操作 ")])],-1),at={class:"bg-[#17171a]"},rt={class:"px-5 py-5 text-sm"},ct={class:"flex items-center"},it=t("div",{class:"flex-shrink-0"},[t("img",{alt:"profil",src:f,class:"mx-auto object-cover rounded-full h-10 w-10"})],-1),dt={class:"mx-3"},ut={class:"whitespace-nowrap w-[6rem] overflow-hidden overflow-ellipsis"},pt={class:"px-5 py-5 text-sm"},_t={class:"whitespace-nowrap"},ht={class:"px-5 py-5 text-sm"},mt={class:"relative whitespace-nowrap"},ft={class:"px-5 py-5 text-sm"},xt={class:"flex gap-5 items-center"},vt=["onClick"],gt=t("svg",{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",class:"w-8 h-8 text-stone-300",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"})],-1),wt=[gt],bt=["onClick"],qt={__name:"table",setup(d){const a=j(),l=n=>{st(n)},_=n=>{z(n).then(r=>{b().then(e=>{a.Ticket=e.data.data})})},h=n=>{const r=new Date(n*1e3),e=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),u=String(r.getDate()).padStart(2,"0"),i=String(r.getHours()).padStart(2,"0"),v=String(r.getMinutes()).padStart(2,"0");return`${e}/${c}/${u} ${i}:${v}`};return b().then(n=>{a.Ticket=n.data.data}),(n,r)=>(s(),o("div",ot,[t("table",lt,[nt,t("tbody",at,[(s(!0),o(m,null,y(M(a).Ticket,(e,c)=>(s(),o("tr",{key:c},[t("td",rt,[t("div",ct,[it,t("div",dt,[t("p",ut,p(e.subject),1)])])]),t("td",pt,[t("p",_t,p(h(e.updated_at)),1)]),t("td",ht,[t("span",{class:B([e.status===1?"text-red-600  bg-red-200":e.reply_status===1?"text-yellow-600  bg-yellow-200":"text-green-600  bg-green-200","relative inline-block px-3 py-1 font-semibold leading-tight rounded-lg"])},[t("span",mt,p(e.status===1?"已关闭":e.reply_status===1?"待回复":"已回复"),1)],2)]),t("td",ft,[t("div",xt,[t("p",{class:"whitespace-nowrap cursor-pointer",onClick:u=>l(e.id)},wt,8,vt),e.status!==1?(s(),o("p",{key:0,onClick:u=>_(e.id),class:"whitespace-nowrap bg-red-400 cursor-pointer p-1 rounded-lg"}," 关闭工单 ",8,bt)):x("",!0)])])]))),128))])])]))}};export{Ct as _,f as a,qt as b};
